---
title: 数据库
date: 2023-05-24 13:40
article: false
star: false
check: 0
---

## 连接

### 左连接
下面是一个示例，展示了如何使用左连接（Left Join）来连接两个表：

假设我们有两个表：`orders`（订单）和`customers`（客户）。

表 "orders" 包含以下列：
```
order_id  |  order_date  |  customer_id  |  amount
-------------------------------------------------
1         |  2022-01-01  |  101          |  50
2         |  2022-02-01  |  102          |  100
3         |  2022-03-01  |  103          |  75
```

表 "customers" 包含以下列：
```
customer_id  |  customer_name
-----------------------------
101          |  John Smith
102          |  Lisa Johnson
```

我们想通过左连接获取订单和相应的客户信息。

以下是使用左连接的SQL查询：
```sql
SELECT orders.order_id, orders.order_date, customers.customer_name, orders.amount
FROM orders
LEFT JOIN customers ON orders.customer_id = customers.customer_id;
```

左连接将返回"orders"表的所有行，并与"customers"表中匹配的行连接起来。如果在"customers"表中没有与"orders"表的行匹配的行，则将使用NULL值填充结果集中的"customer_name"列。

结果集：
```
order_id  |  order_date  |  customer_name  |  amount
--------------------------------------------------
1         |  2022-01-01  |  John Smith     |  50
2         |  2022-02-01  |  Lisa Johnson   |  100
3         |  2022-03-01  |  NULL           |  75
```

注意最后一行，订单ID为3的行在"customers"表中没有匹配的记录，因此"customer_name"列显示为NULL。

这就是一个简单的左连接示例，它将左表的所有行与右表中匹配的行连接起来，并返回包含所有相关列的结果集。

### 右连接
下面是一个示例，展示了如何使用右连接（Right Join）来连接两个表：

假设我们有两个表：`orders`（订单）和`customers`（客户）。

表 "orders" 包含以下列：
```
order_id  |  order_date  |  customer_id  |  amount
-------------------------------------------------
1         |  2022-01-01  |  101          |  50
2         |  2022-02-01  |  102          |  100
3         |  2022-03-01  |  103          |  75
```

表 "customers" 包含以下列：
```
customer_id  |  customer_name
-----------------------------
101          |  John Smith
102          |  Lisa Johnson
103          |  Sarah Brown
104          |  Michael Davis
```

我们想通过右连接获取客户和相应的订单信息。

以下是使用右连接的SQL查询：
```sql
SELECT orders.order_id, orders.order_date, customers.customer_name, orders.amount
FROM orders
RIGHT JOIN customers ON orders.customer_id = customers.customer_id;
```

右连接将返回"customers"表的所有行，并与"orders"表中匹配的行连接起来。如果在"orders"表中没有与"customers"表的行匹配的行，则将使用NULL值填充结果集中的"order_id"、"order_date"和"amount"列。

结果集：
```
order_id  |  order_date  |  customer_name  |  amount
--------------------------------------------------
1         |  2022-01-01  |  John Smith     |  50
2         |  2022-02-01  |  Lisa Johnson   |  100
3         |  2022-03-01  |  Sarah Brown    |  75
NULL      |  NULL        |  Michael Davis  |  NULL
```

注意最后一行，客户ID为104的行在"orders"表中没有匹配的记录，因此"order_id"、"order_date"和"amount"列显示为NULL。

这就是一个简单的右连接示例，它将右表的所有行与左表中匹配的行连接起来，并返回包含所有相关列的结果集。

### 全连接
全连接（Full Join）是一种表连接操作，它返回连接的两个表中的所有行，不论是否有匹配的行。如果某个表中没有与另一个表中的行匹配的行，将使用NULL值填充结果集中的对应列。

全连接可以包括左表的所有行和右表的所有行，并将它们组合在一起形成一个结果集。

以下是使用全连接的示例：

假设我们有两个表：`orders`（订单）和`customers`（客户）。

表 "orders" 包含以下列：
```
order_id  |  order_date  |  customer_id  |  amount
-------------------------------------------------
1         |  2022-01-01  |  101          |  50
2         |  2022-02-01  |  102          |  100
3         |  2022-03-01  |  103          |  75
```

表 "customers" 包含以下列：
```
customer_id  |  customer_name
-----------------------------
101          |  John Smith
102          |  Lisa Johnson
103          |  Sarah Brown
104          |  Michael Davis
```

以下是使用全连接的SQL查询：
```sql
SELECT orders.order_id, orders.order_date, customers.customer_name, orders.amount
FROM orders
FULL JOIN customers ON orders.customer_id = customers.customer_id;
```

全连接将返回"orders"表和"customers"表的所有行，并将它们按照匹配的条件连接起来。如果在某个表中没有与另一个表的行匹配的行，将使用NULL值填充对应的列。

结果集：
```
order_id  |  order_date  |  customer_name  |  amount
--------------------------------------------------
1         |  2022-01-01  |  John Smith     |  50
2         |  2022-02-01  |  Lisa Johnson   |  100
3         |  2022-03-01  |  Sarah Brown    |  75
NULL      |  NULL        |  Michael Davis  |  NULL
```

注意最后一行，客户ID为104的行在"orders"表中没有匹配的记录，因此"order_id"、"order_date"和"amount"列显示为NULL。同时，"customers"表中没有匹配的记录也会显示为NULL值。

全连接返回了"orders"表和"customers"表的所有行，无论是否有匹配的行。它提供了两个表之间的完整数据集合。

在某些情况下，全连接（Full Join）的结果可能与左连接（Left Join）或右连接（Right Join）的结果相同。但在一般情况下，全连接的结果与左连接和右连接的结果是不同的。

左连接和右连接会根据连接条件从两个表中选择匹配的行，并根据连接类型返回相应的结果。左连接返回左表的所有行和与右表匹配的行，右连接返回右表的所有行和与左表匹配的行。如果某个表中没有与另一个表中的行匹配的行，左连接和右连接会使用NULL值填充对应的列。

而全连接会返回两个表中的所有行，不论是否有匹配的行。如果某个表中没有与另一个表中的行匹配的行，全连接也会使用NULL值填充对应的列。

因此，全连接的结果集通常会比左连接或右连接的结果集更大，因为它包含了两个表中的所有行。

需要根据具体的数据和连接条件来确定最终结果。在某些情况下，左连接、右连接和全连接的结果可能相同，特别是在连接条件能够匹配所有行时。然而，在一般情况下，它们的结果是不同的。

因此，在选择连接类型时，应该根据实际需求和预期结果来确定使用左连接、右连接还是全连接。

### 内连接
同全连接，只不过返回的是数据必须两个表都有
